(()=>{"use strict";function e(e){return`\n    In ${e.name} now is \n    ${e.weather[0].main},\n    Temperature: ${e.main.temp} C,\n    Temperature is feels like: ${e.main.feels_like} C,\n    Humidity:${e.main.humidity}%,\n    Atmospheric pressure: ${e.main.pressure} Pa,\n    Wind speed: ${e.wind.speed} m/s`}function t(e,t){e.innerText=t}function n(e,t){const n=`http://maps.googleapis.com/maps/api/staticmap?center=${t.coord.lat},${t.coord.lon}&zoom=10&size=400x400&key=AIzaSyAu9cQhEoU0Uj0-GkEBnWGP_4WpRdos6LU`;e.src=n}async function o(e){try{const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=29322a2e1ecf125b380cfcee03239f35&units=metric`,n=await fetch(t);return await n.json()}catch(e){return console.log("Can not downoload weather data!")}}localStorage.length>0&&!localStorage.getItem("1").includes("[")&&localStorage.clear(),localStorage.length>0||localStorage.setItem("1",JSON.stringify([]));const a=document.querySelector(".textbox"),r=document.querySelector(".requaredCity").getElementsByTagName("p").item(0),c=document.querySelector(".historyList"),i=document.querySelector(".cityMap");document.querySelector(".button").addEventListener("click",async function(a,r,c,i){const l=a.value,s=await o(l);t(r,e(s)),function(e,t){const n=t.getElementsByTagName("li");if(Array.from(n).filter((t=>t.innerText===e)).length>0)return null;n.length>9&&(t.removeChild(n.item(0)),function(){const e=JSON.parse(localStorage.getItem("1"));e.shift(),localStorage.setItem("1",JSON.stringify(e))}());const o=document.createElement("li");o.innerText=e,t.append(o),function(e){if(""===e)return null;const t=JSON.parse(localStorage.getItem("1"));t.push(e),localStorage.setItem("1",JSON.stringify(t))}(e)}(l,c),n(i,s)}.bind(null,a,r,c,i));const l=0===localStorage.length?null:JSON.parse(localStorage.getItem("1"));0!==l.lenght&&l.map((e=>{const t=document.createElement("li");return t.innerText=e,document.querySelector(".historyList").append(t),e})),document.querySelector(".historyList").addEventListener("click",(async function(a){const r=a.target.innerText,c=await o(r),i=e(c),l=document.querySelector(".requaredCity").getElementsByTagName("p").item(0),s=document.querySelector(".cityMap");t(l,i),n(s,c)}),!0),async function(){const a=await async function(){try{const e="https://get.geojs.io/v1/ip/geo.json",t=await fetch(e);return(await t.json()).city}catch(e){return console.log("Can not downoload data about your city!")}}(),r=await o(a),c=e(r);t(document.querySelector(".userCityBlock").getElementsByTagName("p").item(0),c),n(document.querySelector(".cityMap"),r)}()})();